#!/usr/bin/env python3

# Copyright (C) 2015  The Software Heritage developers
# See the AUTHORS file at the top-level directory of this distribution
# License: GNU General Public License version 3, or any later version
# See top-level LICENSE file for more information

import logging
import sys


from swh.loader.dir.loader import DirLoader


dir_loader_config = DirLoader.parse_config_file(config_filename=sys.argv[1])


logging.basicConfig(
    level=logging.DEBUG,
    format='%(asctime)s %(name)s %(levelname)s %(message)s',
    handlers=[
        logging.StreamHandler()
    ],
)

requests_log = logging.getLogger("requests")
requests_log.setLevel(logging.CRITICAL)

loader = DirLoader(dir_loader_config)
loader.process(dir_loader_config)
