SWH-loader-dir
==============

The Software Heritage Directory Loader is a tool and a library to walk a local
directory and inject into the SWH dataset all unknown contained files.


Configuration sample
====================

### dir

Sample dir.ini:

    [main]    
    dir_path = /tmp/swh/loader/dir/

    storage_class = remote_storage
    storage_args = http://localhost:5000/
    send_contents = True
    send_directories = True
    send_revisions = True
    send_releases = True
    send_occurrences = True
    content_packet_size = 10000
    content_packet_size_bytes = 1073741824
    directory_packet_size = 25000
    revision_packet_size = 100000
    release_packet_size = 100000
    occurrence_packet_size = 100000

Present in possible locations:
- ~/.config/swh/loader/dir.ini
- ~/.swh/loader/dir.ini
- /etc/softwareheritage/loader/dir.ini

### Load directory

#### toplevel

    from swh.loader.dir.tasks import LoadDirRepository
    LoadDirRepository().run('/path/to/dir')

#### celery

Providing you have a celery up and running
(cf. https://forge.softwareheritage.org/diffusion/DCORE/browse/master/README.md)

    from swh.loader.dir.tasks import LoadDirRepository
    LoadDirRepository().delay('/path/to/dir')

